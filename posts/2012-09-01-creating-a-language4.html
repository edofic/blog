---
title: Making a programming language: Part 4 - Hello World
---
<table cellpadding="0" cellspacing="0" style="float: right; margin-right: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><div><div><div><div><div><div><div><div><div><div><div><div><div><a href="http://www.flickr.com/photos/90209911@N00/6691167811" style="margin-bottom: 1em; margin-left: auto; margin-right: auto; text-align: clear:right;"><img alt="printf("hello, world\n");" border="0" class="zemanta-img-inserted" height="132" src="http://farm8.static.flickr.com/7153/6691167811_440ed057ba_m.jpg" style="border-bottom-style: none; border-color: initial; border-image: initial; border-left-style: none; border-right-style: none; border-top-style: none; border-width: initial; font-size: 0.8em;" width="200" /></a></div></div></div></div></div></div></div></div></div></div></div></div></div></td></tr><tr><td style="text-align: center;">printf("hello, world\n"); (Photo credit: <a href="http://www.flickr.com/photos/90209911@N00/6691167811" target="_blank">isipeoria</a>)</td></tr></tbody></table><a href="http://edofic.blogspot.com/2012/08/making-programming-language-part-1-how.html" target="_blank">Table of contents</a>, <a href="https://github.com/edofic/scrat-lang" target="_blank">Whole project on github</a><br /><br />What good is a language if you cannot do a <a href="http://en.wikipedia.org/wiki/Hello_world_program" rel="wikipedia" target="_blank" title="Hello world program">Hello World program</a>. Every tutorial on every language I ever read has a Hello World in it somewhere, even if it's a convoluted and sarcastic one.<br /><br />So what do I need?<br /><br /><ul><li>a way to print stuff to console </li><li>strings</li></ul><div>In that order. Since this is more of a math lang for now my first hello world can just print 1 - arguably the simplest number.</div><div><br /></div><h4>Println</h4><div>This one is super easy. Just wrap scala's println. Here's the whole code<br /><pre>lazy val sprint: FunctionVarArg = {<br />  case lst: List[_] => lst --> mkString --> println<br />  case other => throw ScratInvalidTypeError("expected a commaList but got "                                                   + other)<br />}</pre></div>And then I put this as "println" into StdLib's map = global namespace. Since I already have support for functions I just allowed them to do side effects(semantics-no code).<br />The --> operator might have confuse you. It's in an <a href="http://en.wikipedia.org/wiki/Type_conversion" rel="wikipedia" target="_blank" title="Type conversion">implicit conversion</a> I defined:<br /><pre>implicit def any2applyFunc[A](a: A) = new AnyRef {<br />  def -->[B](f: A => B): B = f(a)<br />}<br /></pre>This is the so called <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=179766" target="_blank">pimp my library pattern in scala</a>. It adds the --> operator to all objects. This operator takes another single argument function, applies it and returns the result.<br />So I can have <br /><pre>lst --> mkString --> println<br /></pre>instead of <br /><pre>println(mkString(lst))<br /></pre>Think of it like <a href="http://haskell.org/" rel="homepage" target="_blank" title="Haskell (programming language)">Haskell</a>'s $ operator even if it works in a different way. Oh yes, mkString is another function that I put into StdLib that takes a List(takes Any but does pattern matching) and returns List.mkString<br /><br />And now I have my Hello Math World <br /><pre>println(1)<br /></pre><h3>Strings</h3><div>First I have to parse strings</div><pre>private def string: Parser[SString] = "\".*?\"".r ^^ {<br />  s => SString(s.substring(1, s.length - 1))<br />}<br /><br />private def value: Parser[Expression] = number | string | identifier</pre>SString is just a case class wrapper for string that extends Expression so I can use it in other expressions.<br />When I was first writing this I forgot to add the action combinator to strip of the quotes and was greatly mistified by all strings being wrapped in "". I even spend half an hour debugging my evaluator before it dawned on me.<br />I believe the evaluation of this is trivial.<br /><br />Now I have a REAL hello world: <br /><pre>println("Hello world")<br /></pre>Well...no. Hello world is a program you run. I need an interpreter to run files.<br /><h3><a href="http://en.wikipedia.org/wiki/Interpreter_%28computing%29" rel="wikipedia" target="_blank" title="Interpreter (computing)">Interpreter</a></h3><div>Not quite that different from <a href="http://en.wikipedia.org/wiki/Read–eval–print_loop" rel="wikipedia" target="_blank" title="Read–eval–print loop">REPL</a>. In fact it's just REL: read, evaluate, loop. Printing is now only with explicit println calls. And I don't need to catch exceptions and return into the loop.  Whole code for the interpreter</div><pre>object Interpreter {<br />  def main(args: Array[<a href="http://en.wikipedia.org/wiki/String_%28computer_science%29" rel="wikipedia" target="_blank" title="String (computer science)">String</a>]) = {<br />    if (args.length != 1) {<br />      println("parameters: filename to interpret")<br />    } else {<br />      interpretFile(new File(args(0)))<br />    }<br />  }<br /><br />  val runtime = new ScratRuntime<br /><br />  def interpretFile(file: File) {<br />    if (file.canRead) {<br />      val source = io.Source.fromFile(file)<br />      source.getLines().foreach(runtime.eval)<br />      source.close()<br />    } else {<br />      println("cannot open file " + file.getPath)<br />    }<br />  }<br />}</pre><a href="http://cdn.memegenerator.net/instances/400x/26006910.jpg" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://cdn.memegenerator.net/instances/400x/26006910.jpg" width="200" /></a><br />And now I can put my hello world in a file and run it.  <br />But I needed to decide on the extension. I know it's silly but I didn't want to save the file until I had the extension in mind. And this mean naming the language. Being in "logic mode" I asked my awsome girlfriend who's more artsy type of a person and she immediately responded "scrat"(she's huge fan of <a href="http://en.wikipedia.org/wiki/List_of_Ice_Age_characters" rel="wikipedia" target="_blank" title="List of Ice Age characters">Scrat</a> the squirrel from <a href="http://en.wikipedia.org/wiki/Ice_age" rel="wikipedia" target="_blank" title="Ice age">Ice Age</a>). And them some more funny names, but scrat stuck with me. So I named the file hello.scrat.<br /><br /><br /><b>next: <a href="http://edofic.blogspot.com/2012/09/making-programming-language-part-5.html" target="_blank">variables and decisions</a></b><br />